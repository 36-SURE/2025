<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-de070a7b0ab54f8780927367ac907214.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.30">

  <meta name="author" content=" SURE 2024 Department of Statistics &amp; Data Science Carnegie Mellon University">
  <title>SURE 2025 – Unsupervised learning: hierarchical clustering</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-97331e35b7c4b061e26f0e6fc4589e47.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Unsupervised learning: hierarchical clustering</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
<br>SURE 2024<br><br>Department of Statistics &amp; Data Science<br>Carnegie Mellon University 
</div>
</div>
</div>

</section>
<section>
<section id="background" class="title-slide slide level1 center">
<h1>Background</h1>

</section>
<section id="the-big-picture" class="slide level2">
<h2>The big picture</h2>
<ul>
<li><span class="math inline">\(k\)</span>-means clustering: partition the observations into a pre-specified number of clusters</li>
</ul>
<div class="fragment">
<ul>
<li><p>Hierarchical clustering: does not require commitment to a particular choice of clusters</p>
<ul>
<li><p>In fact, we end up with a tree-like visual representation of the observations, called a dendrogram</p></li>
<li><p>This allows us to view at once the clusterings obtained for each possible number of clusters</p></li>
<li><p>Common approach: agglomerative (bottom-up) hierarchical clustering: build a dendrogram starting from the leaves and combining clusters up to the trunk</p></li>
<li><p>There’s also divisive (top-down) hierarchical clustering: start with one large cluster and then break the cluster recursively into smaller and smaller pieces</p></li>
</ul></li>
</ul>
</div>
</section>
<section id="data-nba-player-statistics-per-100-possessions-2024-25-regular-season" class="slide level2">
<h2>Data: NBA player statistics per 100 possessions (2024-25 regular season)</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_light</span>())</span>
<span id="cb1-3"><a aria-hidden="true" tabindex="-1"></a>nba_players <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/36-SURE/2025/main/data/nba_players.csv"</span>)</span>
<span id="cb1-4"><a aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(nba_players)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 33
     rk player    age team  pos       g    gs    mp    fg   fga fg_percent   x3p
  &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt;
1   152 A.J. G…    25 MIL   SG       73     7  1659   5.3  12.4      0.429   4.5
2   379 A.J. L…    24 TOR   SG       26     2   486   7.9  18.8      0.421   3.3
3   338 AJ Joh…    20 2TM   SG       29    11   639   6.1  15.9      0.385   1.8
4   185 Aaron …    29 DEN   PF       51    42  1447   8.8  16.5      0.531   2.5
5   305 Aaron …    28 HOU   PG       62     3   792   7.2  16.5      0.437   4.4
6   250 Aaron …    25 IND   SF       45    37  1123   8.2  16.2      0.507   3.6
# ℹ 21 more variables: x3pa &lt;dbl&gt;, x3p_percent &lt;dbl&gt;, x2p &lt;dbl&gt;, x2pa &lt;dbl&gt;,
#   x2p_percent &lt;dbl&gt;, e_fg_percent &lt;dbl&gt;, ft &lt;dbl&gt;, fta &lt;dbl&gt;,
#   ft_percent &lt;dbl&gt;, orb &lt;dbl&gt;, drb &lt;dbl&gt;, trb &lt;dbl&gt;, ast &lt;dbl&gt;, stl &lt;dbl&gt;,
#   blk &lt;dbl&gt;, tov &lt;dbl&gt;, pf &lt;dbl&gt;, pts &lt;dbl&gt;, o_rtg &lt;dbl&gt;, d_rtg &lt;dbl&gt;,
#   awards &lt;lgl&gt;</code></pre>
</div>
</div>
</section>
<section id="general-setup" class="slide level2">
<h2>General setup</h2>
<div class="columns">
<div class="column" style="text-align: left;">
<ul>
<li><p>Given a dataset with <span class="math inline">\(p\)</span> variables (columns) and <span class="math inline">\(n\)</span> observations (rows) <span class="math inline">\(x_1,\dots,x_n\)</span></p></li>
<li><p>Compute the <strong>distance/dissimilarity</strong> between observations</p></li>
<li><p>e.g.&nbsp;<strong>Euclidean distance</strong> between observations <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span></p></li>
</ul>
<p><span class="math display">\[d(x_i, x_j) = \sqrt{(x_{i1}-x_{j1})^2 + \cdots + (x_{ip}-x_{jp})^2}\]</span></p>
<p><strong>What are the distances between these counties using <code>x3pa</code> (3-point attempts) and <code>trb</code> (total rebounds)?</strong></p>
</div><div class="column" style="text-align: left;">
<p><br></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a aria-hidden="true" tabindex="-1"></a>nba_players <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> x3pa, <span class="at">y =</span> trb)) <span class="sc">+</span></span>
<span id="cb3-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/unnamed-chunk-3-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="remember-to-standardize" class="slide level2">
<h2>Remember to standardize!</h2>
<div class="columns">
<div class="column" style="text-align: left;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a aria-hidden="true" tabindex="-1"></a>nba_players <span class="ot">&lt;-</span> nba_players <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">std_x3pa =</span> <span class="fu">as.numeric</span>(<span class="fu">scale</span>(x3pa)),</span>
<span id="cb4-4"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">std_trb =</span> <span class="fu">as.numeric</span>(<span class="fu">scale</span>(trb))</span>
<span id="cb4-5"><a aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-6"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a aria-hidden="true" tabindex="-1"></a>nba_players <span class="sc">|&gt;</span> </span>
<span id="cb4-8"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> std_x3pa, <span class="at">y =</span> std_trb)) <span class="sc">+</span></span>
<span id="cb4-9"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb4-10"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="text-align: left;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/unnamed-chunk-4-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="compute-the-distance-matrix-using-dist" class="slide level2">
<h2>Compute the distance matrix using <code>dist()</code></h2>
<ul>
<li>Compute pairwise Euclidean distance</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a aria-hidden="true" tabindex="-1"></a>players_dist <span class="ot">&lt;-</span> nba_players <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(std_x3pa, std_trb) <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">dist</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Returns an object of <code>dist</code> class… but not a <code>matrix</code></p></li>
<li><p>Convert to a matrix, then set the row and column names:</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a aria-hidden="true" tabindex="-1"></a>players_dist_matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(players_dist)</span>
<span id="cb6-2"><a aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(players_dist_matrix) <span class="ot">&lt;-</span> nba_players<span class="sc">$</span>player</span>
<span id="cb6-3"><a aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(players_dist_matrix) <span class="ot">&lt;-</span> nba_players<span class="sc">$</span>player</span>
<span id="cb6-4"><a aria-hidden="true" tabindex="-1"></a>players_dist_matrix[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             A.J. Green A.J. Lawson AJ Johnson Aaron Gordon
A.J. Green    0.0000000   0.8626792  1.0457677    1.5086463
A.J. Lawson   0.8626792   0.0000000  1.3441734    1.1393048
AJ Johnson    1.0457677   1.3441734  0.0000000    0.9839163
Aaron Gordon  1.5086463   1.1393048  0.9839163    0.0000000</code></pre>
</div>
</div>
</section></section>
<section>
<section id="hierarchical-clustering" class="title-slide slide level1 center">
<h1>Hierarchical clustering</h1>

</section>
<section id="agglomerative-hierarchical-clustering" class="slide level2">
<h2>(Agglomerative) <a href="https://en.wikipedia.org/wiki/Hierarchical_clustering">Hierarchical clustering</a></h2>
<p>Let’s pretend all <span class="math inline">\(n\)</span> observations are in their own cluster</p>
<div class="fragment">
<ul>
<li><p>Step 1: Compute the pairwise dissimilarities between each cluster</p>
<ul>
<li>e.g., distance matrix on previous slides</li>
</ul></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Step 2: Identify the pair of clusters that are <strong>least dissimilar</strong></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Step 3: Fuse these two clusters into a new cluster!</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><strong>Repeat Steps 1 to 3 until all observations are in the same cluster</strong></li>
</ul>
</div>
<div class="fragment">
<p><strong>“Bottom-up”</strong>, agglomerative clustering that forms a <strong>tree/hierarchy</strong> of merging</p>
<p>No mention of any randomness. And no mention of the number of clusters <span class="math inline">\(k\)</span>.</p>
</div>
</section>
<section id="agglomerative-hierarchical-clustering-1" class="slide level2">
<h2>(Agglomerative) <a href="https://en.wikipedia.org/wiki/Hierarchical_clustering">Hierarchical clustering</a></h2>
<div class="columns">
<div class="column" style="text-align: left;">
<p>Start with all observations in their own cluster</p>
<ul>
<li><p>Step 1: Compute the pairwise dissimilarities between each cluster</p></li>
<li><p>Step 2: Identify the pair of clusters that are <strong>least dissimilar</strong></p></li>
<li><p>Step 3: Fuse these two clusters into a new cluster!</p></li>
<li><p><strong>Repeat Steps 1 to 3 until all observations are in the same cluster</strong></p></li>
</ul>
</div><div class="column" style="text-align: left;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b5/Clusters.svg/250px-Clusters.svg.png" class="quarto-figure quarto-figure-center" style="width:70.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="agglomerative-hierarchical-clustering-2" class="slide level2">
<h2>(Agglomerative) <a href="https://en.wikipedia.org/wiki/Hierarchical_clustering">Hierarchical clustering</a></h2>
<div class="columns">
<div class="column" style="text-align: left;">
<p>Start with all observations in their own cluster</p>
<ul>
<li><p>Step 1: Compute the pairwise dissimilarities between each cluster</p></li>
<li><p>Step 2: Identify the pair of clusters that are <strong>least dissimilar</strong></p></li>
<li><p>Step 3: Fuse these two clusters into a new cluster!</p></li>
<li><p><strong>Repeat Steps 1 to 3 until all observations are in the same cluster</strong></p></li>
</ul>
</div><div class="column" style="text-align: left;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ad/Hierarchical_clustering_simple_diagram.svg/418px-Hierarchical_clustering_simple_diagram.svg.png" class="quarto-figure quarto-figure-center" style="width:85.0%"></p>
</figure>
</div>
</div>
</div>
<p>Forms a <strong>dendrogram</strong> (typically displayed from bottom-up)</p>
</div></div>
</section>
<section id="dissimilarity-between-clusters" class="slide level2">
<h2>Dissimilarity between clusters</h2>
<ul>
<li><p>We know how to compute distance/dissimilarity between two observations</p></li>
<li><p><strong>But how do we handle clusters?</strong></p>
<ul>
<li>Dissimilarity between a cluster and an observation, or between two clusters</li>
</ul></li>
</ul>
<div class="fragment">
<p>We need to choose a <strong>linkage function</strong>. Clusters are built up by <strong>linking them together</strong></p>
</div>
</section>
<section id="types-of-linkage" class="slide level2">
<h2>Types of linkage</h2>
<p>First, compute all pairwise dissimilarities between the observations in the two clusters</p>
<p>i.e., compute the distance matrix between observations, <span class="math inline">\(d(x_i, x_j)\)</span> for <span class="math inline">\(i \in C_1\)</span> and <span class="math inline">\(j \in C_2\)</span></p>
<div class="fragment">
<ul>
<li><strong>Complete linkage</strong>: use the <strong>maximum</strong> (largest) value of these dissimilarities <span class="math inline">\(\underset{i \in C_1, j \in C_2}{\text{max}} d(x_i, x_j)\)</span> (<strong>maximal</strong> inter-cluster dissimilarity)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><strong>Single linkage</strong>: use the <strong>minimum</strong> (smallest) value of these dissimilarities <span class="math inline">\(\underset{i \in C_1, j \in C_2}{\text{min}} d(x_i, x_j)\)</span> (<strong>minimal</strong> inter-cluster dissimilarity)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><strong>Average linkage</strong>: use the <strong>average</strong> value of these dissimilarities <span class="math inline">\(\displaystyle \frac{1}{|C_1||C_2|} \sum_{i \in C_1} \sum_{j \in C_2} d(x_i, x_j)\)</span> (<strong>mean</strong> inter-cluster dissimilarity)</li>
</ul>
</div>
</section>
<section id="complete-linkage-example" class="slide level2">
<h2>Complete linkage example</h2>
<div class="columns">
<div class="column" style="text-align: left;">
<ul>
<li><p>Use <code>hclust()</code> with a <code>dist()</code> objsect</p></li>
<li><p>Use <code>complete</code> linkage by default</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a aria-hidden="true" tabindex="-1"></a>nba_complete <span class="ot">&lt;-</span> players_dist <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">hclust</span>(<span class="at">method =</span> <span class="st">"complete"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Use <code>cutree()</code> to return cluster labels</p></li>
<li><p>Returns compact clusters (similar to <span class="math inline">\(k\)</span>-means)</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a aria-hidden="true" tabindex="-1"></a>nba_players <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-3"><a aria-hidden="true" tabindex="-1"></a>    <span class="at">cluster =</span> <span class="fu">as.factor</span>(<span class="fu">cutree</span>(nba_complete, <span class="at">k =</span> <span class="dv">3</span>))</span>
<span id="cb9-4"><a aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb9-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> std_x3pa, <span class="at">y =</span> std_trb,</span>
<span id="cb9-6"><a aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> cluster)) <span class="sc">+</span></span>
<span id="cb9-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb9-8"><a aria-hidden="true" tabindex="-1"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb9-9"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="text-align: left;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/unnamed-chunk-11-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="what-are-we-cutting-dendrograms" class="slide level2">
<h2>What are we cutting? Dendrograms</h2>
<div class="columns">
<div class="column" style="text-align: left;">
<p>Use the <a href="https://cran.r-project.org/web/packages/ggdendro/index.html"><code>ggdendro</code></a> package (instead of <code>plot()</code>)</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdendro)</span>
<span id="cb10-2"><a aria-hidden="true" tabindex="-1"></a>nba_complete <span class="sc">|&gt;</span> </span>
<span id="cb10-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggdendrogram</span>(<span class="at">labels =</span> <span class="cn">FALSE</span>, </span>
<span id="cb10-4"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">leaf_labels =</span> <span class="cn">FALSE</span>,</span>
<span id="cb10-5"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">theme_dendro =</span> <span class="cn">FALSE</span>) <span class="sc">+</span>  </span>
<span id="cb10-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Dissimilarity between clusters"</span>) <span class="sc">+</span></span>
<span id="cb10-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb10-8"><a aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-9"><a aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Each <strong>leaf</strong> is one observation</p></li>
<li><p><strong>Height of branch indicates dissimilarity between clusters</strong></p>
<ul>
<li>(After first step) Horizontal position along x-axis means nothing</li>
</ul></li>
</ul>
</div><div class="column" style="text-align: left;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/unnamed-chunk-12-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="textbook-example" class="slide level2">
<h2><a href="https://bradleyboehmke.github.io/HOML/hierarchical.html">Textbook example</a></h2>
<p><br></p>

<img data-src="https://bradleyboehmke.github.io/HOML/19-hierarchical_files/figure-html/comparing-dendrogram-to-distances-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:100.0%"></section>
<section id="cut-dendrograms-to-obtain-cluster-labels" class="slide level2">
<h2>Cut dendrograms to obtain cluster labels</h2>
<div class="columns">
<div class="column" style="text-align: left;">
<p>Specify the height to cut with <code>h</code> (instead of <code>k</code>)</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/complete-dendro-cut-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="text-align: left;">
<p>For example, <code>cutree(nba_complete, h = 4)</code></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/nba-complete-cut-plot-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="single-linkage-example" class="slide level2">
<h2>Single linkage example</h2>
<div class="columns">
<div class="column" style="text-align: left;">
<p>Change the <code>method</code> argument to <code>single</code></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/single-dendro-cut-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="text-align: left;">
<p>Results in a <strong>chaining</strong> effect</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/nba-single-plot-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="average-linkage-example" class="slide level2">
<h2>Average linkage example</h2>
<div class="columns">
<div class="column" style="text-align: left;">
<p>Change the <code>method</code> argument to <code>average</code></p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/average-dendro-cut-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="text-align: left;">
<p>Closer to <code>complete</code> but varies in compactness</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/nba-average-plot-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="more-linkage-functions" class="slide level2">
<h2>More linkage functions</h2>
<ul>
<li><p><strong>Centroid linkage</strong>: Computes the dissimilarity between the centroid for cluster 1 and the centroid for cluster 2</p>
<ul>
<li><p>i.e.&nbsp;distance between the averages of the two clusters</p></li>
<li><p>use <code>method = centroid</code></p></li>
</ul></li>
</ul>
<div class="fragment">
<ul>
<li><p><strong>Ward’s linkage</strong>: Merges a pair of clusters to minimize the within-cluster variance</p>
<ul>
<li><p>i.e.&nbsp;aim is to minimize the objection function from <span class="math inline">\(K\)</span>-means</p></li>
<li><p>can use <code>ward.D</code> or <code>ward.D2</code> (different algorithms)</p></li>
</ul></li>
</ul>
</div>
</section>
<section id="post-clustering-analysis" class="slide level2">
<h2>Post-clustering analysis</h2>
<ul>
<li><p>For context, how does position relate clustering results?</p></li>
<li><p>Two-way table to compare the clustering assignments with player positions</p></li>
<li><p>(What’s the way to visually compare these two variables?)</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(<span class="st">"Cluster"</span> <span class="ot">=</span> <span class="fu">cutree</span>(nba_complete, <span class="at">k =</span> <span class="dv">3</span>), <span class="st">"Position"</span> <span class="ot">=</span> nba_players<span class="sc">$</span>pos)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       Position
Cluster   C  PF  PG  SF  SG
      1  15  40  69  51 100
      2   4  25  15  22  19
      3  70  20   1   5   1</code></pre>
</div>
</div>
<ul>
<li>Takeaway: positions tend to fall within particular clusters</li>
</ul>
</section>
<section id="include-more-variables" class="slide level2">
<h2>Include more variables</h2>
<div class="columns">
<div class="column" style="text-align: left;">
<ul>
<li>It’s easy to <strong>include more variables</strong> - just change the distance matrix</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a aria-hidden="true" tabindex="-1"></a>nba_players_features <span class="ot">&lt;-</span> nba_players <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(x3pa, x2pa, fta, trb, ast, stl, blk, tov)</span>
<span id="cb13-3"><a aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-4"><a aria-hidden="true" tabindex="-1"></a>player_dist_mult_features <span class="ot">&lt;-</span> nba_players_features <span class="sc">|&gt;</span> </span>
<span id="cb13-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">dist</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Then perform hierarchical clustering as before</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a aria-hidden="true" tabindex="-1"></a>nba_players_hc_complete <span class="ot">&lt;-</span> player_dist_mult_features <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">hclust</span>(<span class="at">method =</span> <span class="st">"complete"</span>) <span class="co"># can try out other methods</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Visualize with dendrogram</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a aria-hidden="true" tabindex="-1"></a>nba_players_hc_complete <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggdendrogram</span>(<span class="at">labels =</span> <span class="cn">FALSE</span>, </span>
<span id="cb15-3"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">leaf_labels =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-4"><a aria-hidden="true" tabindex="-1"></a>               <span class="at">theme_dendro =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb15-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Dissimilarity between clusters"</span>) <span class="sc">+</span></span>
<span id="cb15-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(), </span>
<span id="cb15-7"><a aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb15-8"><a aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="text-align: left;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/unnamed-chunk-18-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="visualizing-clustering-results-with-pca" class="slide level2">
<h2>Visualizing clustering results with PCA</h2>
<ul>
<li><p>Similar to <span class="math inline">\(k\)</span>-means, if there are more than two dimensions (variables), we can perform PCA</p></li>
<li><p>Then plot the observations onto the first two principal components</p></li>
</ul>
<div class="columns">
<div class="column" style="text-align: left;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span>
<span id="cb16-2"><a aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_cluster</span>(</span>
<span id="cb16-3"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">data =</span> nba_players_features,</span>
<span id="cb16-4"><a aria-hidden="true" tabindex="-1"></a>       <span class="at">cluster =</span> <span class="fu">cutree</span>(nba_players_hc_complete, <span class="at">k =</span> <span class="dv">3</span>)),</span>
<span id="cb16-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb16-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="at">ellipse =</span> <span class="cn">FALSE</span></span>
<span id="cb16-7"><a aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb16-8"><a aria-hidden="true" tabindex="-1"></a>  ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>() <span class="sc">+</span></span>
<span id="cb16-9"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="text-align: left;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/unnamed-chunk-20-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="choosing-number-of-clusters" class="slide level2">
<h2>Choosing number of clusters</h2>
<ul>
<li><p>Just like <span class="math inline">\(k\)</span>-means, there are heuristics for choosing the number of clusters for hierarchical clustering</p></li>
<li><p>Options: elbow method, silhouette, gap statistic (but again, use these with caution)</p></li>
</ul>
<div class="columns">
<div class="column" style="text-align: left;">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a aria-hidden="true" tabindex="-1"></a>nba_players_features <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">fviz_nbclust</span>(<span class="at">FUN =</span> hcut, <span class="at">method =</span> <span class="st">"wss"</span>)</span>
<span id="cb17-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a aria-hidden="true" tabindex="-1"></a><span class="co"># silhouette</span></span>
<span id="cb17-5"><a aria-hidden="true" tabindex="-1"></a><span class="co"># nba_players_features |&gt; </span></span>
<span id="cb17-6"><a aria-hidden="true" tabindex="-1"></a><span class="co">#   fviz_nbclust(FUN = hcut, method = "silhouette")</span></span>
<span id="cb17-7"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a aria-hidden="true" tabindex="-1"></a><span class="co"># gap statistic</span></span>
<span id="cb17-9"><a aria-hidden="true" tabindex="-1"></a><span class="co"># library(cluster)</span></span>
<span id="cb17-10"><a aria-hidden="true" tabindex="-1"></a><span class="co"># nba_hc_gap_stat &lt;- nba_players_features |&gt; </span></span>
<span id="cb17-11"><a aria-hidden="true" tabindex="-1"></a><span class="co">#   clusGap(FUN = hcut, nstart = 30, K.max = 10, B = 50)</span></span>
<span id="cb17-12"><a aria-hidden="true" tabindex="-1"></a><span class="co"># nba_hc_gap_stat |&gt; </span></span>
<span id="cb17-13"><a aria-hidden="true" tabindex="-1"></a><span class="co">#   fviz_gap_stat()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="text-align: left;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="07-hierarchical_files/figure-revealjs/unnamed-chunk-22-1.png" class="quarto-figure quarto-figure-center" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="practical-issues" class="slide level2">
<h2>Practical issues</h2>
<ul>
<li><p>What dissimilarity measure should be used?</p></li>
<li><p>What type of linkage should be used?</p></li>
<li><p>How many clusters to choose?</p></li>
<li><p>Which features should we use to drive the clustering?</p>
<ul>
<li>Categorical variables?</li>
</ul></li>
<li><p>Hard clustering vs.&nbsp;soft clustering</p>
<ul>
<li><p>Hard clustering (<span class="math inline">\(k\)</span>-means, hierarchical): assigns each observation to exactly one cluster</p></li>
<li><p>Soft (fuzzy) clustering: assigns each observation a probability of belonging to a cluster</p></li>
</ul></li>
</ul>
</section>
<section id="appendix-code-to-build-dataset" class="slide level2">
<h2>Appendix: code to build dataset</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb18-2"><a aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb18-3"><a aria-hidden="true" tabindex="-1"></a>nba_url <span class="ot">&lt;-</span> <span class="st">"https://www.basketball-reference.com/leagues/NBA_2025_per_poss.html"</span></span>
<span id="cb18-4"><a aria-hidden="true" tabindex="-1"></a>nba_players <span class="ot">&lt;-</span> nba_url <span class="sc">|&gt;</span> </span>
<span id="cb18-5"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>() <span class="sc">|&gt;</span> </span>
<span id="cb18-6"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_element</span>(<span class="at">css =</span> <span class="st">"#per_poss"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-7"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>() <span class="sc">|&gt;</span> </span>
<span id="cb18-8"><a aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb18-9"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(player) <span class="sc">|&gt;</span> </span>
<span id="cb18-10"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(g) <span class="sc">|&gt;</span> </span>
<span id="cb18-11"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb18-12"><a aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mp <span class="sc">&gt;=</span> <span class="dv">200</span>) <span class="co"># keep players with at least 200 minutes played</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p><a href="https://36-sure.github.io/2024">36-SURE.github.io/2024</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/36-SURE\.github\.io\/2025\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>